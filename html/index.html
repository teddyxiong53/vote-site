<!DOCTYPE html>
<html>

<head>
  <title>DOSS Vote System</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="./css/xhl_grid_image.css">
</head>

<body>
  <div>
    <h1>请在下面勾选5种耳机：</h1>
    <p>
      规则：每种耳机只能选一次。选择完成后，填写用户信息后提交即可。<button id="clear_all">清空所有选择</button>
    </p>

  </div>

  <table>
    <col name="pic" >
    <col name="col_1">
    <col name="col_2">
    <col name="col_3">
    <col name="col_4">
    <col name="col_5">
    <tr>
      <th>耳机图片</th>
      <th>第一选择</th>
      <th>第二选择</th>
      <th>第三选择</th>
      <th>第四选择</th>
      <th>第五选择</th>
    </tr>
    <tr>
      <td><img src="./imgs/1.jpg"></td>
      <td><input type="radio" name="first" class="1.jpg"></td>
      <td><input type="radio" name="second" class="1.jpg"></td>
      <td><input type="radio" name="third" class="1.jpg"></td>
      <td><input type="radio" name="forth" class="1.jpg"></td>
      <td><input type="radio" name="fifth" class="1.jpg"></td>
    </tr>

    <tr>
      <td><img src="./imgs/2.jpg"></td>
      <td><input type="radio" name="first" class="2.jpg"></td>
      <td><input type="radio" name="second" class="2.jpg"></td>
      <td><input type="radio" name="third" class="2.jpg"></td>
      <td><input type="radio" name="forth" class="2.jpg"></td>
      <td><input type="radio" name="fifth" class="2.jpg"></td>
    </tr>

    <tr>
      <td><img src="./imgs/3.jpg"></td>
      <td><input type="radio" name="first"></td>
      <td><input type="radio" name="second"></td>
      <td><input type="radio" name="third"></td>
      <td><input type="radio" name="forth"></td>
      <td><input type="radio" name="fifth"></td>
    </tr>

    <tr>
      <td><img src="./imgs/4.jpg"></td>
      <td><input type="radio" name="first"></td>
      <td><input type="radio" name="second"></td>
      <td><input type="radio" name="third"></td>
      <td><input type="radio" name="forth"></td>
      <td><input type="radio" name="fifth"></td>
    </tr>

    <tr>
      <td><img src="./imgs/5.jpg"></td>
      <td><input type="radio" name="first"></td>
      <td><input type="radio" name="second"></td>
      <td><input type="radio" name="third"></td>
      <td><input type="radio" name="forth"></td>
      <td><input type="radio" name="fifth"></td>
    </tr>

  
  </table>
  <br>
  <br>
  <h1>请填写下面信息后提交</h1>

  <div id="info_div">
    <form action="http://192.168.56.101:3344" method="POST">
      名字：<input type="text" name="name"><br>
      年龄：<input type="number" name="age"><br>
      性别：<select>
        <option value="male">男</option>
        <option value="female">女</option>
        </select><br>
      <input type="submit" value="提交">
    </form>
  </div>
  <br>
  <br>
  <br>
  <div>
    <p>Written by XiongHanliang 1073167306@qq.com</p>
  </div>
  <script>
    var choiceArr = new Array(5)
    var curChoice = null
    var radioArr = null;
    var rowClassNames = [
      "1.jpg",
      "2.jpg"
    ]
    var picNums = 5

    $.column = function(i) {
      return $('tr td:nth-child('+(i+1)+')', this)
    }


    function processCheck(input_radio) {
        //console.log("$(this):", $(this))
        //console.log("input_radio:", input_radio.parent)
        if(input_radio.name == "first" && input_radio.checked == true) {
          //$('table tr > td:nth-child(2)').attr('style', 'background-color:green;');
          //$.column(1).attr('style', 'background-color:green;');
          $.column(1).addClass("selected")
          choiceArr[0] = $(".")//class name, same as pic name
        }
        if(input_radio.name == "second" && input_radio.checked == true) {
          //$.column(2).attr('style', 'background-color:green;');
          $.column(2).addClass("selected")
        }

        if(input_radio.name == "third" && input_radio.checked == true) {
          //$.column(3).attr('style', 'background-color:green;');
          $.column(3).addClass("selected")
        }

        if(input_radio.name == "forth" && input_radio.checked == true) {
          //$.column(4).attr('style', 'background-color:green;');
          $.column(4).addClass("selected")
        }

        if(input_radio.name == "fifth" && input_radio.checked == true) {
          //$.column(5).attr('style', 'background-color:green;');
          $.column(5).addClass("selected")
        }

    }
    function checkIfChoiceValid() {
      //get current choice
      
      console.log("this:", $(this))
      if(this.class == "row_1" && this.checked == true) {
        curChoice = "1"
      } 
      for(var i=0; i<choiceArr.length; i++) {
        console.log("choiceArr[i]:", choiceArr[i])
        if(choiceArr[i] == curChoice && choiceArr[i] != undefined) {
          alert("same choice")
          return
        }
      }
      choiceArr[i] == curChoice
      //fill the choice to the result arry
      //FillChoiceArray()
    }
    
    function hoverChangeColor() {
      $('table tr:gt(0)').hover(
        function() {
          $(this).addClass("hover")
          console.log("hover in")
        },
        function() {
          $(this).removeClass("hover")
          console.log("hover out")
        }
      )
    }
    function OddAndEvenColor() {
      $('table tbody tr:odd').addClass('odd')
      $('table tbody tr:even').addClass('even')
    }
    $(document).ready(function() {
      radioArr = $('input[type=radio]')
      //console.log(radioArr[0])
      //change color
      radioArr.change(function() {
        //console.log(this.length)
        processCheck(this)
        //checkIfChoiceValid(this)
        //console.log(this.name)
      })

      //odd and even different color
      //OddAndEvenColor()
      //hover change row color
      //hoverChangeColor()
      //console.log("select inputs:", $('input[type=radio]').first())
      
      $("#clear_all").click(function() {
        $('input[type=radio]').prop("checked", false)
        $('table  tr > td').removeClass("selected")
        console.log("clear all select")
      })
    })
  </script>
</body>

</html>